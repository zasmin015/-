import logging
import random
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters

# Токен Telegram бота
TELEGRAM_TOKEN = '7694284838:AAHV0QaQy5M5xDEffC4H12rlvbOIWiOBEsc'

# Включаем логирование, чтобы отслеживать ошибки
logging.basicConfig(format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
                    level=logging.INFO)
logger = logging.getLogger(__name__)

# Список смешных подписей
funny_captions = [
    "Когда ты выглядишь как 'я не хотел идти на работу'.",
    "Новый тренд: картинка без смысла.",
    "Когда ты попытался быть серьезным, но не получилось.",
"Когда ты выглядишь как 'я не хотел идти на работу'.",
    "Новый тренд: картинка без смысла.",
    "Когда ты попытался быть серьезным, но не получилось.",
    "Это лицо, когда понял, что завтра понедельник.",
    "Когда тебе кажется, что ты выглядишь круто, но на деле — не очень.",
    "Пошел в магазин за хлебом, а вернулся с собакой и тремя игрушками.",
    "Я тоже так умею, только с закрытыми глазами!",
    "Когда пытаешься сделать вид, что все под контролем, но это не так.",
    "Когда все шло хорошо, пока не пришел понедельник.",
    "Когда думаешь, что сдал экзамен, но оказывается, что не записал свой ответ.",
    "Когда очень устал, но продолжаешь работать, потому что кофе — это жизнь.",
    "Зачем работать, когда можно отдыхать и выглядеть так, как будто что-то делаешь?",
    "Когда ты пытался быть серьезным, но не получилось... как всегда!",
    "Просто я. И никакой магии здесь нет.",
    "Поймали момент до того, как я понял, что не проснулся.",
    "Лицо, когда спросили 'ты что, не спал?' и ты отвечаешь: 'ну, почти'.",
    "Ожидаешь завтрак — получаешь фотосессию.",
    "Когда ты пытаешься быть стильным, но на самом деле ты — комик.",
    "Тот момент, когда твои амбиции выше, чем твои силы.",
    "Не переживай, это просто шутка. Хотя, может, и нет.",
    "Лицо, когда увидел свою зарплату за этот месяц.",
    "Готов к приключениям... или просто к сну.",
    "Если мне повезет, я, возможно, буду выглядеть как человек. Если не повезет — как это.",
    "Кажется, я заблудился в своих мыслях, но кто заметит?",
    "Я не понимаю, что происходит, но вроде как это нормально.",
    "Когда ты выиграл битву с утренним пробуждением, но проиграл войну с кроватью.",
    "Похоже, я потерял свою суперспособность, но я все еще крутой.",
    "Никогда не знаешь, что будет, пока не откроешь глаза после сна.",
    "Ты не можешь остановить меня, но я сам могу встать и уйти.",
    "Это лицо, когда понял, что завтра понедельник.",
    "Когда тебе кажется, что ты выглядишь круто, но на деле — не очень."
]

# Функция для отправки случайной подписи
def get_random_caption():
    return random.choice(funny_captions)

# Команда /start
async def start(update: Update, context) -> None:
    await update.message.reply_text('Привет! Отправь мне изображение, и я сгенерирую подпись!')

# Обработчик изображений
async def handle_photo(update: Update, context) -> None:
    # Генерация случайной подписи
    caption = get_random_caption()

    # Отправляем подпись в ответ
    await update.message.reply_text(f"Вот смешная подпись: {caption}")

# Функция для запуска бота
def main() -> None:
    # Создаем объект приложения
    application = Application.builder().token(TELEGRAM_TOKEN).build()

    # Обработчики команд
    application.add_handler(CommandHandler("start", start))

    # Обработчик для получения фото
    application.add_handler(MessageHandler(filters.PHOTO, handle_photo))

    # Запускаем бота
    application.run_polling()

if __name__ == '__main__':
    main()
